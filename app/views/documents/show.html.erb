<div class="container">
  <div class="document_viewer">
    <h1><%= @document.name %></h1>
    <% if @document_file.nil? %>
      <% file = @document.document_files.first %>
    <% else %>
      <% file = @document_file %>
    <% end %>
    <%= link_to file.url, target: "_blank" do %>
      <% if ["pdf"].include?(file.original_format) %>
        <%= cl_image_tag file.url.key, format: "png" %>
      <% else %>
        <%= cl_image_tag file.url.key %>
      <% end %>
    <% end %>
    <div class="admin-show mt20">
      <label>Titre</label>
      <p><%= file.name %></p>

      <% unless file.transcript == "" %>
        <label>Transcript</label>
        <p><%= file.transcript %></p>
      <% end %>

      <% unless file.translation_fr == "" %>
        <label>Traduction en fran√ßais</label>
        <p><%= file.translation_fr %></p>
      <% end %>
      
      <% unless file.comment == "" %>
        <label>Commentaires</label>
        <p><%= file.comment %></p>
      <% end %>

      <% unless file.persons_position == "" %>
        <label>Position des personnes</label>
        <p><%= file.persons_position %></p>
      <% end %>
      <label>Fichiers</label>
      <div class="flex flex-row">
        <% @document.document_files.each do |f| %>
          <%= link_to document_path(document_file: f) do %>
            <%  if f.id == file.id
                  @active = "active"
                else
                  @active = ""
                end %>
            <div class="file-preview <%= @active %>">
              <% if ["png", "jpg", "jpeg"].include?(f.original_format) %>
                <%= cl_image_tag f.url.key, width: "200", height: "200", crop: "fill", class: "img-100" %>
              <% else %>
                <%= cl_image_tag f.url.key, format: "png", width: "200", height: "200", crop: "fill", class: "img-100" %>
              <% end %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
  <div class="document_info">
    <div class="row">
      <% unless @document.date == "" || @document.date.nil? %>
        <div>
          <i class="material-icons">calendar_today</i><%= @document.date %>
        </div>
      <% end %>
      <% unless @document.location == "" || @document.location.nil? %>
        <div>
          <i class="material-icons">location_on</i><%= @document.location %>
        </div>
      <% end %>
    </div>
    <% unless @document.people == [] %>
      <div class="row">
        <i class="material-icons">people_outline</i>
        <% @document.people.each do |p| %>
          <%= link_to p.full_name_index, person_path(p) %>
        <% end %>
      </div>
    <% end %>
    <% unless @document.notes == "" || @document.notes.nil? %>
      <div class="row">
        <i class="material-icons">short_text</i>
        <p><%= @document.notes %></p>
      </div>
    <% end %>
    <div class="row">
      <i class="material-icons">inventory_2</i>
      <div>
        <p><%= @document.fund.name %></p>
        <p><%= @document.reference %></p>
        <p><%= @document.box %></p>
      </div>
    </div>
  </div>
</div>